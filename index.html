<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Food Lovers</title>
  <link rel="stylesheet" href="css/stylesheet.css">
</head>
<body>

<header>
  <div class="logo">Food Lovers</div>
  <nav>
    <a href="#home">Home</a>
    <a href="#about">About Us</a>
    <a href="#menu">Menu</a>
    <a href="#chefs">Our Chefs</a>
    <a href="signup.html">Sign Up</a>
    <a href="login.html">Login</a>
    <a href="#" onclick="logout()">Logout</a>
  </nav>
</header>

<section class="hero" id="home">
  <div class="hero-text">
    <h1>Welcome to Food Lovers</h1>
    <p>Delicious food made with love</p>
    <a href="#menu">
      <button class="btn-black">Explore Menu</button>
    </a>
  </div>
</section>

<section class="about" id="about">
  <img src="images/image2.jpg" alt="About Food Lovers">
  <div>
    <h2>About Us</h2>
    <p>At Food Lover, we believe that great food brings people together. Our passion is creating delicious, high-quality meals that satisfy every craving and leave you wanting more.</p>
    <p>From carefully selected ingredients to expertly crafted recipes, every dish is made with love and attention to detail.</p>
    <p>We are dedicated to offering a variety of flavors that celebrate comfort, taste, and freshness.</p>
    <p>Whether you're looking for a quick bite, a hearty meal, or something special to enjoy with friends and family, Food Lover is your go-to destination.</p>
    <p>Our mission is simple: to serve food that makes you happy. With a welcoming atmosphere and a commitment to quality, we strive to give every customer an unforgettable dining experience.</p>
    <button class="btn-black">See more</button>
  </div>
</section>

<section class="menu" id="menu">
  <h2>Our Menu</h2>
  <div class="menu-grid">
    <div class="card" onclick="handleMenuClick('korean')">
      <img src="images/image3.jpg">
      <span>Korean Food</span>
    </div>
    <div class="card" onclick="handleMenuClick('japanese')">
      <img src="images/image4.jpg">
      <span>Japanese Food</span>
    </div>
    <div class="card" onclick="handleMenuClick('thai')">
      <img src="images/image5.jpg">
      <span>Thai Food</span>
    </div>
    <div class="card" onclick="handleMenuClick('mexican')">
      <img src="images/image6.jpg">
      <span>Mexican Food</span>
    </div>
    <div class="card" onclick="handleMenuClick('sweets')">
      <img src="images/image7.jpg">
      <span>Sweets</span>
    </div>
    <div class="card" onclick="handleMenuClick('drinks')">
      <img src="images/image8.jpg">
      <span>Drinks</span>
    </div>
  </div>
</section>

<section class="chefs" id="chefs">
  <h2>Our Chefs</h2>
  <div class="chef-grid">
    <img src="images/image9.jpg">
    <img src="images/image10.jpg">
    <img src="images/image11.jpg">
  </div>
</section>

<!-- FOOTER MAIN -->
<footer class="footer-main">
  <h2>Food Lovers</h2>
  <div class="footer-box"></div>
</footer>

<!-- COPYRIGHT BAR -->
<div class="footer-copy">
  <p>Â© 2026 Food Lovers. All Rights Reserved.</p>
</div>

<!-- API Configuration -->
<script>
  const API_BASE_URL = 'http://localhost:8000/api';
</script>

<!-- Authentication Script -->
<script>
// Check login status on page load
window.addEventListener('DOMContentLoaded', function() {
  const token = localStorage.getItem('auth_token');
  const user = JSON.parse(localStorage.getItem('user') || '{}');
  
  const loginLink = document.querySelector('a[href="login.html"]');
  const signupLink = document.querySelector('a[href="signup.html"]');
  const logoutLink = document.querySelector('a[onclick="logout()"]');

  if (token && user.name) {
    // User is logged in
    if (loginLink) loginLink.style.display = 'none';
    if (signupLink) {
      signupLink.textContent = `Hi, ${user.name}`;
      signupLink.style.cursor = 'default';
      signupLink.onclick = (e) => e.preventDefault();
    }
  } else {
    // User not logged in
    if (logoutLink) logoutLink.style.display = 'none';
  }
  
  // Handle Google OAuth callback
  handleGoogleCallback();
});

// Handle Google OAuth callback
function handleGoogleCallback() {
  const urlParams = new URLSearchParams(window.location.search);
  const token = urlParams.get('token');
  const userStr = urlParams.get('user');
  
  if (token) {
    localStorage.setItem('auth_token', token);
    if (userStr) {
      try {
        localStorage.setItem('user', decodeURIComponent(userStr));
      } catch (e) {
        console.error('Error parsing user data:', e);
      }
    }
    // Redirect to clean URL
    window.location.href = 'index.html';
  }
}

// Logout
async function logout() {
  const token = localStorage.getItem('auth_token');
  
  if (token && !token.startsWith('demo-token')) {
    try {
      await fetch(`${API_BASE_URL}/auth/logout`, {
        method: 'POST',
        headers: {
          'Authorization': `Bearer ${token}`,
          'Accept': 'application/json'
        }
      });
    } catch (error) {
      console.error('Logout error:', error);
    }
  }

  localStorage.removeItem('auth_token');
  localStorage.removeItem('user');
  alert('Logged out successfully!');
  window.location.href = 'index.html';
}
</script>

<!-- Menu Click Handler -->
<script>
function handleMenuClick(category) {
  const token = localStorage.getItem('auth_token');
  
  if (!token) {
    alert('Please login first to view dishes.');
    window.location.href = 'login.html';
  } else {
    window.location.href = `pages/${category}.html`;
  }
}
</script>

</body>
</html>